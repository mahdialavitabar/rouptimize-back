{
  "id": "c44a7e5c-614e-400a-b56f-89a2e1856a48",
  "prevId": "e3d6206b-2f4b-42d9-9539-6b030b4cc30d",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.branch": {
      "name": "branch",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "branch_company_idx": {
          "name": "branch_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"branch\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"branch\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.company": {
      "name": "company",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.company_balance_purchase": {
      "name": "company_balance_purchase",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "company_balance_type_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "createdById": {
          "name": "createdById",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "totalAfter": {
          "name": "totalAfter",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "remainingAfter": {
          "name": "remainingAfter",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "monthlyLimitAfter": {
          "name": "monthlyLimitAfter",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "periodStartAfter": {
          "name": "periodStartAfter",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "company_balance_purchase_company_idx": {
          "name": "company_balance_purchase_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"company_balance_purchase\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"company_balance_purchase\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.company_balance": {
      "name": "company_balance",
      "schema": "",
      "columns": {
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "company_balance_type_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'per_missions'"
        },
        "total": {
          "name": "total",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "remaining": {
          "name": "remaining",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "monthlyLimit": {
          "name": "monthlyLimit",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "periodStart": {
          "name": "periodStart",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"company_balance\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"company_balance\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.driver_invite": {
      "name": "driver_invite",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "branchId": {
          "name": "branchId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "driverId": {
          "name": "driverId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "roleId": {
          "name": "roleId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "usedAt": {
          "name": "usedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "usedByMobileUserId": {
          "name": "usedByMobileUserId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "createdById": {
          "name": "createdById",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "driver_invite_company_idx": {
          "name": "driver_invite_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "driver_invite_driver_idx": {
          "name": "driver_invite_driver_idx",
          "columns": [
            {
              "expression": "driverId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "driver_invite_code_unique": {
          "name": "driver_invite_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"driver_invite\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"driver_invite\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.drivers": {
      "name": "drivers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "branchId": {
          "name": "branchId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "licenseNumber": {
          "name": "licenseNumber",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "licenseExpiry": {
          "name": "licenseExpiry",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "startWorkingTime": {
          "name": "startWorkingTime",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "endWorkingTime": {
          "name": "endWorkingTime",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "isActive": {
          "name": "isActive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "createdById": {
          "name": "createdById",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "driver_company_idx": {
          "name": "driver_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "driver_branch_idx": {
          "name": "driver_branch_idx",
          "columns": [
            {
              "expression": "branchId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "driver_user_idx": {
          "name": "driver_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"drivers\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"drivers\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.missions": {
      "name": "missions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "branchId": {
          "name": "branchId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "customerName": {
          "name": "customerName",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "phone": {
          "name": "phone",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "routeId": {
          "name": "routeId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "latitude": {
          "name": "latitude",
          "type": "double precision",
          "primaryKey": false,
          "notNull": true
        },
        "longitude": {
          "name": "longitude",
          "type": "double precision",
          "primaryKey": false,
          "notNull": true
        },
        "deliveryTime": {
          "name": "deliveryTime",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "startTimeWindow": {
          "name": "startTimeWindow",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "endTimeWindow": {
          "name": "endTimeWindow",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "assignmentId": {
          "name": "assignmentId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "driverId": {
          "name": "driverId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "driverName": {
          "name": "driverName",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "vehicleId": {
          "name": "vehicleId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "vehiclePlate": {
          "name": "vehiclePlate",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "missions_status_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'unassigned'"
        },
        "createdById": {
          "name": "createdById",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "mission_company_idx": {
          "name": "mission_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "mission_date_idx": {
          "name": "mission_date_idx",
          "columns": [
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "mission_status_idx": {
          "name": "mission_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "mission_route_idx": {
          "name": "mission_route_idx",
          "columns": [
            {
              "expression": "routeId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "mission_driver_idx": {
          "name": "mission_driver_idx",
          "columns": [
            {
              "expression": "driverId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "mission_vehicle_idx": {
          "name": "mission_vehicle_idx",
          "columns": [
            {
              "expression": "vehicleId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"missions\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"missions\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.mobile_user": {
      "name": "mobile_user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "imageUrl": {
          "name": "imageUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "branchId": {
          "name": "branchId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "roleId": {
          "name": "roleId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "driverId": {
          "name": "driverId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "isSuperAdmin": {
          "name": "isSuperAdmin",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "mobile_user_company_username_uq": {
          "name": "mobile_user_company_username_uq",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "username",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "mobile_user_driver_idx": {
          "name": "mobile_user_driver_idx",
          "columns": [
            {
              "expression": "driverId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "mobile_user_driverId_drivers_id_fk": {
          "name": "mobile_user_driverId_drivers_id_fk",
          "tableFrom": "mobile_user",
          "tableTo": "drivers",
          "columnsFrom": [
            "driverId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.refresh_tokens": {
      "name": "refresh_tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "userId": {
          "name": "userId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "mobileUserId": {
          "name": "mobileUserId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "tokenHash": {
          "name": "tokenHash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "isRevoked": {
          "name": "isRevoked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "familyId": {
          "name": "familyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "refresh_token_user_idx": {
          "name": "refresh_token_user_idx",
          "columns": [
            {
              "expression": "userId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "refresh_token_mobile_user_idx": {
          "name": "refresh_token_mobile_user_idx",
          "columns": [
            {
              "expression": "mobileUserId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "refresh_tokens_userId_user_id_fk": {
          "name": "refresh_tokens_userId_user_id_fk",
          "tableFrom": "refresh_tokens",
          "tableTo": "user",
          "columnsFrom": [
            "userId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "refresh_tokens_mobileUserId_mobile_user_id_fk": {
          "name": "refresh_tokens_mobileUserId_mobile_user_id_fk",
          "tableFrom": "refresh_tokens",
          "tableTo": "mobile_user",
          "columnsFrom": [
            "mobileUserId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.role": {
      "name": "role",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "authorizations": {
          "name": "authorizations",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "role_company_idx": {
          "name": "role_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"role\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"role\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.route_missions": {
      "name": "route_missions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "routeId": {
          "name": "routeId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "missionId": {
          "name": "missionId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "stopOrder": {
          "name": "stopOrder",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "route_missions_route_mission_uq": {
          "name": "route_missions_route_mission_uq",
          "columns": [
            {
              "expression": "routeId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "missionId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "route_missions_route_stop_uq": {
          "name": "route_missions_route_stop_uq",
          "columns": [
            {
              "expression": "routeId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "stopOrder",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "route_missions_mission_uq": {
          "name": "route_missions_mission_uq",
          "columns": [
            {
              "expression": "missionId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "route_missions_routeId_routes_id_fk": {
          "name": "route_missions_routeId_routes_id_fk",
          "tableFrom": "route_missions",
          "tableTo": "routes",
          "columnsFrom": [
            "routeId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "route_missions_missionId_missions_id_fk": {
          "name": "route_missions_missionId_missions_id_fk",
          "tableFrom": "route_missions",
          "tableTo": "missions",
          "columnsFrom": [
            "missionId"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"route_missions\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"route_missions\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.routes": {
      "name": "routes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "branchId": {
          "name": "branchId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "status": {
          "name": "status",
          "type": "routes_status_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "geometry": {
          "name": "geometry",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "totalDistanceMeters": {
          "name": "totalDistanceMeters",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "totalDurationSeconds": {
          "name": "totalDurationSeconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "vehicleId": {
          "name": "vehicleId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "driverId": {
          "name": "driverId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "route_company_idx": {
          "name": "route_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "route_date_idx": {
          "name": "route_date_idx",
          "columns": [
            {
              "expression": "date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "route_status_idx": {
          "name": "route_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "route_vehicle_idx": {
          "name": "route_vehicle_idx",
          "columns": [
            {
              "expression": "vehicleId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "route_driver_idx": {
          "name": "route_driver_idx",
          "columns": [
            {
              "expression": "driverId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"routes\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"routes\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.user": {
      "name": "user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "imageUrl": {
          "name": "imageUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "branchId": {
          "name": "branchId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "roleId": {
          "name": "roleId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "isSuperAdmin": {
          "name": "isSuperAdmin",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "user_company_idx": {
          "name": "user_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_email_idx": {
          "name": "user_email_idx",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_username_idx": {
          "name": "user_username_idx",
          "columns": [
            {
              "expression": "username",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.vehicle_driver_assignments": {
      "name": "vehicle_driver_assignments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "branchId": {
          "name": "branchId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "driverId": {
          "name": "driverId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "vehicleId": {
          "name": "vehicleId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "startDate": {
          "name": "startDate",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "endDate": {
          "name": "endDate",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "vda_company_idx": {
          "name": "vda_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "vda_vehicle_idx": {
          "name": "vda_vehicle_idx",
          "columns": [
            {
              "expression": "vehicleId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "vda_driver_idx": {
          "name": "vda_driver_idx",
          "columns": [
            {
              "expression": "driverId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "vda_date_range_idx": {
          "name": "vda_date_range_idx",
          "columns": [
            {
              "expression": "startDate",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "endDate",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"vehicle_driver_assignments\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"vehicle_driver_assignments\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    },
    "public.vehicles": {
      "name": "vehicles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vin": {
          "name": "vin",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "plateNumber": {
          "name": "plateNumber",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "year": {
          "name": "year",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "startWorkingTime": {
          "name": "startWorkingTime",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "endWorkingTime": {
          "name": "endWorkingTime",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "weightCapacity": {
          "name": "weightCapacity",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "volumeCapacity": {
          "name": "volumeCapacity",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "missionCapacity": {
          "name": "missionCapacity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "skills": {
          "name": "skills",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "costPerKm": {
          "name": "costPerKm",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "costPerHour": {
          "name": "costPerHour",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "startPoint": {
          "name": "startPoint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "endPoint": {
          "name": "endPoint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "vehicles_status_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "companyId": {
          "name": "companyId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "branchId": {
          "name": "branchId",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "createdById": {
          "name": "createdById",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deletedAt": {
          "name": "deletedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "vehicle_company_idx": {
          "name": "vehicle_company_idx",
          "columns": [
            {
              "expression": "companyId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "vehicle_branch_idx": {
          "name": "vehicle_branch_idx",
          "columns": [
            {
              "expression": "branchId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "vehicle_status_idx": {
          "name": "vehicle_status_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "tenant_isolation_company": {
          "name": "tenant_isolation_company",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"vehicles\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid",
          "withCheck": "COALESCE(current_setting('app.is_superadmin', true), 'false') = 'true' OR \"vehicles\".\"companyId\" = NULLIF(current_setting('app.current_company_id', true), '')::uuid"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": true
    }
  },
  "enums": {
    "public.company_balance_type_enum": {
      "name": "company_balance_type_enum",
      "schema": "public",
      "values": [
        "per_missions",
        "per_vehicles_per_month"
      ]
    },
    "public.missions_status_enum": {
      "name": "missions_status_enum",
      "schema": "public",
      "values": [
        "unassigned",
        "assigned",
        "inProgress",
        "delivered"
      ]
    },
    "public.routes_status_enum": {
      "name": "routes_status_enum",
      "schema": "public",
      "values": [
        "draft",
        "planned",
        "in_progress",
        "completed",
        "delayed"
      ]
    },
    "public.vehicles_status_enum": {
      "name": "vehicles_status_enum",
      "schema": "public",
      "values": [
        "active",
        "inactive",
        "maintenance"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}